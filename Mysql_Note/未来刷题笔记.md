# Education for the future

1. 数据库管理系统提供了数据定义语言（DDL），用于定义各种数据库对象。数据定义语句经 DDL 编译器编译后，各种对象的描述信息存放在数据库的 ==数据字典==。
   
   - 解释：数据字典是对系统中各类数据描述集合，是进行详细的数据收集和数据所获得的主要成果。数据字典在数据库设计中占有很重要的地位，通常包括数据项、数据结构、数据流、数据存储和处理过程5个部分。
   
2. IDEFO 需求建模方法由箭头和 ==矩形框== 两种元素构成。
   
   - IDEFO 需求建模方法由箭头和矩形框两种元素构成。矩形框代表功能活动，写在矩形内的动词短语描述功能活动的名称。
   
3. DFO 方法由四种基本元素组成，其中描述系统数据提供者或使用者的是 ==外部项==。
   
   - 解释：DFD 方法由四种基本元素（模型对象）组成：数据流、处理、数据存储和外部项。其中描述系统数据提供者或使用者的是外部项。
   
4. 在 IDEF1X 建模方法中，用圆角矩形表示 == 从属 == 实体集。

5. 关系数据库中要求关系的主码不能为空，这属于数据模型三要素中的 ==完整性约束==。

   - 解析：数据模型通常由数据结构、数据操作和完整性约束三部分构成。数据的完整性约束是一组完整性规则，它是给定的数据模型中数据及其联系所有的制约和依存的规则，用以限定符合数据模型的数据状态及状态变化，以保证数据的正确，有效、相容。实体的完整性规定，主码的任何属性都不能为空，因为概念模型中实体和联系都是可区分的，而且它们以码唯一的标识。如果主码的属性值可以为空，则意味着在概念模型中不以码为唯一的标识的实体。

6. 使用约束可以保证数据库中数据的正确性，其中 `unique` 约束允许出现空值但不允许出现重复值。

7. 在 SQL server 2008 中，设 log1 是 SQL server 身份验证模式的数据库服务器登录账户。现要授予 log1 具有创建数据的权限，补全语句：==exec sp_addsrcvrolemember 'log1','dbcreator'==。

8. 数据库管理系统一般通过周期性检查 ==事务等待== 图来实现死锁检测。

9. 一个事务执行过程中，其正在访问的数据被其他事务修改，导致处理结果不正确。这是由于不满足并发事件的 `隔离` 性儿引起的。

   解释：当多个用户并发地存储数据时就会产生多个事务同时存取一个数据的情况，若对并发操作不加以控制就可能会存取不正确的数据，破坏事务的一致性和数据库的一致性。并发操作带来的数据不一致性主要包括丢失修改、不可重复读和读“脏”数据，产生上述三类数据的不一致性主要原因就是并发操作破坏了事务的隔离性，所以数据库管理必须提供并发控制机制。

10. 在数据库系统出现系统故障后进行恢复时，对与事务 T ，如果在日志文件中有 BEGIN TRANSACTION 记录，也有 COMMIT 记录，但其对数据的修改没有写到数据库中，则数据库管理系统处理这种事务时应该执行的操作是 ==redo==。

11. 设某并行数据库采用一台具有 14 个刀片的刀片服务器，每个刀片具有独立的内存和硬盘，各刀片之间通过刀片服务器上的以太网交换机实现通信，则该并行数据库采用的体系结构是 ==无共享== 结构。

    - 解析：并行数据服务器分为两种结构：完全共享资源结构，完全不共享资源结构。完全共享资源结构指对每个数据存取都要经过公共通信线路，其所有的处理器共享内存、磁盘等资源。完全不共享资源结构指高功能计算机系统由多个较小的系统替代，每个站点都要实现全局数据目录，每个站点有独立的内存和磁盘对应站点的服务器。

12. 数据仓库是一个面向 ==主题== 的、集成的、非易失的、且随时间变化的数据集合。

    - 数据仓库是为了构建新的分析处理环境而出现的一种数据存储和组织技术，基本特征包括：==数据是面向主题的、集成的、非易失的、随时间不断变动的。==主题是一个在较高层次上对数据的抽象，这使得面向主题的数据组织可以独立于数据的处理逻辑，因而可以在这种环境上方便地开发出新的分析型应用。

13. 数据库管理系统为三级模式结构提供了两层映射机制，其中模式或内模式映射提供了 ==物理== 独立性。

14. 按照数据库应用系统声明周期模型，系统设计阶段细分为 ==概念设计、逻辑设计 和 物理设计== 三个步骤。

15. 设用 UML 设计某数据库应用系统，设计人员规划了一组应用程序集，该集合由动态链接库和可执行程序构成。为了展现这些应用程序集的组织和依赖关系，以对源代码，可执行程序的发布等进行系统建模，应采用的 UML 图是 ==组件== 图。

    - 解析：组件图提供系统的物理视图。UML 图形中组件图的用途是显示系统中的软件对其他软件组成（例如，库函数）的依赖关系，它可以在一个非常高的层次上显示，从而仅显示粗粒度的组件，也可以在组件包层上显示。

16. 设有学生表（学号，姓名，所在系名）和选课表（学号，课程号，成绩）。现要建立统计每个系选课人数的视图。如下语句：create view v1(系名，人数) as select 所在系名，==count(distinct 选课表.学号)==from 选课表 join 学生表 on 选课表.学号 = 学生表.学号 ==group by 所在系名==;

17. 设有课程表（课程号，课程名，学分，先修课程号），已知某应用程序需要列出“数据库原理”课程的一门先修课程，查询结果要求输出（课程名，学分，先修课程名称，先修课学分），可以用 `自` 连接操作在一个查询中实现此功能。

    - 解析：自连接是 SQL 语句中经常要用的连接方式，使用自连接可以将自身表的一个镜像当做另一张表来对待，从而能够得到一些特殊的数据。简而言之，自连接的本意就是将一张表看成多张表来做连接。
    - 语法：select 课程表.课程名，课程表.学分，先修表.课程名，先修表.学分 from emp 课程表，emp 先修表 where 课程表.课程名 = '数据库原理' and 课程表.先修课程号 = 先修表.课程号。

18. 在 SQL server 2008 的某用户数据库中，设有 T 表，现要在 T 表的 c1 列和 c2 列上建立一个复合唯一聚集索引，其中 c1 列值重复率为 20%， c2 列为 10%。

    - 语法：create unique clustered index idx1 on t(==c2,c1==);
    - 解析：聚集索引是指索引项的顺序与表中记录的物理顺序一致的索引组织。用户可以在最经常查询的列上建立索引以提高查询效率。unique 表示要建立的每一个索引值对应的唯一的数据记录，先对 c2 表索引然后对 c1 表索引，可以使索引的性能最优。

19. 在 SQL server 2008 中，现要将 t1 表中的 c1 列（int 类型）定义标识列，初值和增量值均为1。

    - 语句：create table t1 (c1 int identity(1,1),..);
    - 解析：在数据库中，常用的一个流水编号通常使用 identity 栏位来进行设置，这种编号的好处是不会重复，而且是唯一的，这对 table 中的唯一值特性很重要，通常用来做客户编号、订单编号等。此处用 identity 约束性定义，使 c1 可以成为标识列。

20. 在 SQL server 2008 中，设 u1 是 SQL server 身份验证模式的数据库服务器登录账户，现希望 u1 在该数据库服务器上具有系统管理员权限。

    - 语句：exec sp_addsrvrolemember 'u1','sysadmin';

    - 解析：在SQL Server中，登录用户可以设置的系统权限包括：

      1. sysadmin：具有最高级别的权限，可以执行任何操作，包括创建、修改和删除数据库对象，管理服务器和数据库的配置，以及授予其他用户权限。

      2. serveradmin：可以管理服务器的配置，包括更改服务器级别的配置选项、停止和启动服务器以及管理服务器的连接。

      3. setupadmin：可以管理服务器的安装和升级过程，包括安装和卸载服务器实例、更改服务器实例的配置选项以及管理安装日志。

      4. securityadmin：可以管理服务器级别的安全性，包括创建和修改登录账户、重置登录账户的密码、管理服务器级别的权限和角色。

      5. processadmin：可以监视和终止服务器进程，包括查看当前运行的进程、终止自己的进程以及终止其他用户的进程。

      6. diskadmin：可以管理数据库文件和文件组，包括创建和修改数据库文件、更改文件组的属性以及管理数据库备份和还原。

      7. dbcreator：可以创建、修改和删除数据库，包括创建和修改数据库的文件和文件组、更改数据库的属性以及删除数据库。

      8. bulkadmin：可以执行大容量数据导入和导出操作，包括使用BULK INSERT语句导入数据、使用BCP命令导入和导出数据。

      除了以上系统权限，还可以为登录用户分配数据库级别的权限，例如：

      1. db_owner：可以执行数据库中的任何操作，包括创建、修改和删除数据库对象。

      2. db_datareader：可以读取数据库中的数据。

      3. db_datawriter：可以向数据库中写入数据。

      4. db_ddladmin：可以执行数据库对象的创建、修改和删除操作。

      5. db_securityadmin：可以管理数据库级别的安全性，包括创建和修改用户、角色和权限。

      这些权限可以根据需要进行分配和管理，以确保用户具有适当的权限来执行其工作。

21. 数据库管理系统中的加锁协议规定了事务的加锁时间、持锁时间和释放锁时间，其中 ==三级加锁== 协议可以完全保证并发事务数据的一致性。

    - 解析：三级加锁协议也称三级封锁协议，它保证正确地调度事务的并发操作，是事务对数据库对象加锁、解锁必须遵守的一种规则。在运用 x 锁和 s 锁对数据对象加锁时，还需要约定一些规则，例如何时申请 x 锁或 s 锁、持锁时间、何时释放等。

22. 在数据库系统出现系统故障后进行恢复时，对于事务 t，如果日志文件中有 BEGIN TRANSACTION 记录，而没有 COMMIT 或 ROLLBACK 记录，则数据库管理系统处理这种事务时应执行的操作是 `UNDO`。

    - 解析：系统故障造成数据库状态不一致的原因有两个，一是未完成的事务对数据库的更新可能写入数据库，二是已提交事务对数据库的更新可能还留在缓冲区没来的及写入数据库。对故障发生前已提交的事务（即有 BEGIN Transaction，又有 commit)做redo操作，对于故障发生时尚未完成的事务（只有 BEGIN Transaction, 而没有 commit 或 rollback）做 undo 操作。

23. 在动态转储中，利用转储文件只能将数据库恢复到转出过程中的某个状态，且转出文件中的数据可能不一致，只有和 `日志` 文件综合起来使用，才能将数据库恢复到一致状态。

    - 解析：数据转储是数据库恢复中采用的基本技术。所谓转储 DBA 定期地将整个数据库复制到磁带或另一个磁盘上保存起来的过程。动态转储是指在转储过程期间允许对数据库进行存取或修改，即转储和用户事务可并发执行，但在转储数据后，副本上的数据并不能保证正确有效，为此必须把转储期间各事务对数据库的修改活动登记下来，建立日志文件。

24. 通常数据库的转储机制有三种，分别是 `完全转储、差量转储和增量转储`。

    - 解析：数据库的转储机制一般有完全转储、差量转储和增量转储三种。完全转储是针对整个数据库中的数据全部备份，效率低，时间长；差量转储基于上一次完全转储基点之后变换转储，是对上次转储之后对所有文件中修改或删除的记录的转储，效率高，时间短；增量转储是对数据库中凡是有记录变化的文件的整个文件进行复制效率介于前两种转储方式之间。

25. 数据仓库是`面向主题的、集成的、非易失的、随时间变化的数据集合`，用来支持管理人员的决策。

    - 解析：数据仓库是为了构建新的分析处理环境而出现的一种数据存储和组织技术，基本特征包括：数据是面向主题的，集成的，非易失的，随时间不断变化的数据集合，用来支持管理人员的决策。

26. 在数据仓库设计和建设过程中，设计者需要调查用户的决策或数据处理需求，并将功能相似且需要相关联数据支持的需求进行归类，得到不同的需求集合，并在企业数据模型中寻找能够满足各个需求集合的数据集合，然后针对各个数据集合开展数据仓库数据模型的设计。这种设计方法称为 `面向主题` ，的设计方法。

    - 解析：面向主题的数据组织方式，就是在较高层次上对分析对象数据的一个完整且一致的描述，能刻画分析对象所涉及的企业各项数据，以及数据之间的联系。所谓较高层次是相对面向应用的数据组织方式而言的，即按照主题进行数据组织的方式具有更高的数据抽象级别。与传统数据库面向应用进行数据组织的特点相对应，数据仓库中的数据面向主题的组织进行组织。例如：一个生产企业的数据仓库所组织的主题可能有产品订货分析和货物发运分析等。

27. 在 SQL server 2008 中，设有数据库中有商品表（商品号，商品名，进货价格），商品号为主码；销售表（商品号，销售时间，销售数量，销售价格，本次利润），商品号和销售时间为主码，销售价格为本次销售商品的单价。现要求每当在销售表中插入前4列数据时（假设一次插入一行数据），系统自动计算本次产生的利润，并将该利润赋给销售表的第5列“本次利润”。语句：

    - ```mysql
      create trigger calcu_product 
      on 销售表
      for insert 
      as
      	declare @进价 money,@销量 int, @售价 money,@利润 money
      	select @进价=进货价值 from 商品表
      	select @销量=销售数量，@售价=销售价格
      	from insterted
      	set @利润=@销量*(@售价-@进价)
      	update 销售表 set 本次利润=@利润
      	where 商品号 in(select 商品号 from insterted)
      	and 销售时间 in(select 销售时间 from insterted)
      end
      ```

      解析：触发器是在用户定义关系表上的一类事件驱动的特殊过程。一旦定义，任何用户对表的增、删、改操作均由服务器自动激活相应的触发器，在 DBMS 核心层进行集中的完整性控制。触发器类似于约束，但比约束更加灵活，可以实施比 foreign key 约束，check 约束更为复杂的检查和操作，具有更精细和强大的数据控制能力。
    
28. 如果数据文件中数据记录排列顺序与索引文件中索引的排列顺序一致，则这种索引被称为`聚集`索引。

    1. 建立索引是加快查询速度的有效手段。用户可以根据应用环境的需要，在基本表上建立一个或多个索引，以提供多种存取路径，加快查找速度。聚集索引是指索引的顺序与表中记录的物理顺序一致的索引组织。

29. 关系数据库中的视图提供了 `逻辑` 数据独立性。

30. 在 UML 中，用例模型由用例、系统和 `角色` 三部分组成。

    1. 用例图是外部用户（参与者）所能观察到的系统功能的模型图，显示系统中的用例与角色及其互相关系，主要用于对系统、系统或类的功能行为进行建模。用例模型由用例、角色和系统三部分组成。

31. 在 SQL server 2008 中，用于判断游标提取状态的全局变量是 `@@fetch_status`。

    1. 游标是系统为用户设计的一个数据缓冲区，存放 SQL 语句的执行结果，每个游标区都有一个名字。用户可以通过游标逐一获取记录，并赋给主变量，交由主语言进一步处理。游标经常会和全局变量 @@fetch_status 与 while 循环共同使用，已达到遍历游标所在数据集的目的。在执行一条 fetch 语句后，必须在对另一游标执行另一 fetch 语句前测试 @@fetch_status。

32. 设在 SQL server 2008 某数据库中有购买表（顾客号，商品号，购买时间），现要查询 co1 顾客购买过但 co2 顾客没有购买过的商品。

    1. 语句：

       ```mysql
       select 商品号 from 购买表 where 顾客号 = 'co1'
       except
       select 商品号 from 购买表 where 顾客号 ='co2';
       ```

       select 语句的查询结果是元组的集合，所以多个 select 语句的结果可以进行集合操作。集合操作主要包括并操作 union、交操作 insert 和 差操作 except。参加集合操作的各查询结果的列数必须相同，对应项的数据类型也必须相同。

33. 在 SQL server 2008中，计算两个日期之差的函数是 `datediff()`。

    1. 解析：datediff() 函数可以返回两个日期之间的天数。
    2. 语法：datediff(detepart, startedate, enddate), startdate 和 enddate 参数是合法的日期表达式。例如 SQL 表达式：select datadiff(day,'2008-12-30', '2008-12-29') as diffdate

34. 设在 SQL server 2008某数据库中有按如下格式定义的存储过程首部：

    1. 语句：CREATE PROC P1 @x int, @y int, @z int output as ...
    2. 补全：declare @s int exec p1 20,30, @s `output`。
    3. 解析：存储过程是 SQL 语句和可选控制流语句的预编译集合，它用一个名字存储一个处理单元。创建存储过程为：

    ```mysql
    create procedure 过程名 ([参数1，参数2，....]) as <pl/sql快>;
    ```

    4. 默认的参数全为输入参数，如果包含输出参数，在相应的参数后面加 output 标识。如：

    ```mysql 
    create procedure 过程名 ([参数1，参数2 output，...]) as <pl/sql快>；
    ```

    5. 执行存储过程时调用 exec 存储过程名 参数名1，参数名2 output，执行存储过程的参数与 create 时的参数对应。

35. 在 SQL server 2008 中，每个数据页可以存储8060自己的数据。设表 t 有 10000 行数据，每行占用 3000 字节，则存储该表数据大约需要 ` 40` mb 存储空间。

36. 在 SQL server 2008中，只具有修改数据库中的全部用户表数据的权限的系统角色是 `db_datawiter`。

37. 应用程序编写不当可能导致数据库中出现死锁，由于死锁导致的事务回滚属于数据库故障中的 `事务内部`故障。

    1. 解析：数据库系统中的故障的种类分为事务内部故障、系统故障、介质故障，计算机病毒。事务故障分为预期事务内部故障和非预期事务内部故障。非预期的事务内部故障是不可预期的，不能由应用程序处理的，包括运算溢出、并发事务发生死锁儿被撤销该事务、违反了某些完整性限制等。而系统故障是造成系统停止运转的任何事件，使得系统要重新启动。介质故障指硬件损坏等。

38. 两阶段加锁协议可以保证事务调度的 `可串行` 性。

    1. 解析：DBMS 并发事务不同的调度可能会产生不同的结果。为了衡量调度正确性，执行结果可以等价于串行调度则认为是正确的，这样的调度叫可串行调度。而两段锁协议就是实现可现可串行调度的协议。若并发执行的所有事务均遵守两段锁协议，则这些事务的任何并发调度都是可串的。

39. 只复制最近一次数据库完全转储以来发生变化的数据的转储方式称为 `差量` 转储。

    1. 解析：差量备份只记录数据库上一次完全转储后的变化部分，这样可以提高转储效率，同时保证了备份中数据的完整性。

40. 在分布式数据库中，采用 `半` 连接操作可以减少场地之间的数据传输量。

    1. 解析：数据在网络中传输时，则是以整个关系（也可以是片段）传输，显然这是一种冗余的方法。在一个关系传输到另一场地后，并非每个数据都参与连接操作，因此，不参与连接的数据或无用的数据不必在网络中来回传输。采用半连接操作机可以在网络中只传输参与连接的数据。

41. 在进行多维分析时，如果将年销售额投影到每个月上来进行观察，这种分析动作被称为 `钻取` 。

    1. 解析：常见的 olap 多维分析操作有切片、切块、旋转、钻取和卷起。通过这些操作，使用户能从多个角度多侧片观察数据。卷起是在数据立方体中执行聚集操作，通过在维级别中上升或通过消除某个或某些维来观察概括的数据。钻取是通过在维级别中下降或通过引入某个或某些维来更细致的观察数据。切片和切块实现局部数据的显示，帮助用户从众多混杂的数据中进行选择。旋转就是改变方向。

42. 在数据仓库中，元数据主要分为 `技术元数据和业务元数据`两类。

    1. 解析：元数据是关于数据的数据。在数据仓库系统中，元数据可以帮助数据仓库管理员和数据仓库的开发人员非常方便地找到他们所关心的数据。元数据是描述数据仓库内数据的结构和建立方法的数据，可将其按通途的不同分为两类：`技术元数据和业务元数据`。

43. 在数据模型三个要素中，表述客观世界中数据对象之间关联的是 `数据结构`。

44. 在信息洗系统的需求分析中，目前广为使用的结构化分析与功能建模方法主要有 DFD、IDEFO等。其中，DFD 加墨方法也被称为过程建模和功能建模方法，其核心是 `数据流` 。

45. 数据库管理系统为用户和应用程序提供了 `DDL` 语言，用此可以定义数据库的模式结构，但此语言执行后的结果不能回滚。

46. 当用户在一个关系表的某一列上建立一个非聚集索引（该表没有聚集索引）时，数据库管理系统会自动为该索引维护一个索引结构。该索引结构中的记录是由 `索引列列值` 和它相对应的指针构成的。

47. 在 UML中，当要描述状态之间的转换时，可通过 `时间` 图来体现时间因子的作用。

48. 现要查询 CO1 课程考试成绩最高的前3名学生的学号和成绩（包括并列的情况）。

    - 语句：

    - ```mysql
      select top 3 学号，成绩 from 课程表
      where 课程号 = 'CO1'
      order by 成绩 
      desc
      ```

49. 在 SQL server 2008中，能够出现在 select 语句目标中用户自定义函数是 `标量` 函数。

50. 设要在表 T 建立一个针对插入操作的前触发器，

    - 语句：

    - ```mysql
      create trigger tri_insert on T instead of insert;
      ```

51. SQL server 2008 中声明游标的语句为： ==declare x cursor for select ....==

52. 在 SQL server 2008 中，用户数据库中主要数据文件的扩展名为 `mdf`。

53. 设在 SQL server 2008某数据库中，要设置不允许用户 U1 获得对表 T 数据的删除权限

    1. 语句：deny delete on T to U1;

54. 优化 SQL 语句执行效率数据数据库应用系统 `运行管理与维护` 阶段的任务。

55. 为避免活锁现象的发生，数据库管理系统采用 `先来先服务` 策略处理事务的加锁请求。

56. 数据库系统出现故障是不可避免的。当数据库系统出现事务故障和系统故障时需使用数据库的 `日志` 文件进行恢复。

57. 分布式数据库的 `分片` 透明性是最高界别的透明性，它使得在编译程序时用户只需要对全局关系进行操作，这样简化了应用程序的维护。

58. 在 OLAP 的实现方式中，以多维数组作为存储结构的被称作 `MOLAP`。

59. 在数据仓库环境中，粒度是一个重要的设计问题，粒度越 `小` ，细节程度越高，能回答的查询就越多，数据量就比较大。

60. 有表 score(sno,cno,degree)，查询该表中最高分的学生学号和课程号：

    1. ```mysql
       select sno as 学号,cno as 课程号
       from score
       where degree = (select max(s1.degree) from score s1 );
       # 解析 通过 as 来对属性起别名，使得在新建的表中该属性名被定义为 as 后面的别名。s1 就是这个表的别名。
       ```

61. 数据库管理员要随时观察数据库的动态变化，并在数据库出现错误、故障或产生不适应的情况时能够随时采取有效措施保护数据库。这种监控机制称为 `手动监控机制`。

    - 解析：对数据库系统的监控分为`手动监控机制和自动监控机制`两种。

62. 在数据库系统中，`外模式/模式` 映像关系用于提供数据与应用程序间的独立性。

63. 以下程序段的功能是：在数据库中判断是否存在名为 my_proc 的存储过程，若存在，则删之，然后创建同名的存储过程，该存储过程的功能是 author_id, author_name, addree 和 telephone 字段插入数据。

    ```mysql
    # 选择并建立别名
    use bookdb GO;
    # 查询 删除
    if exists(
        select Name from Sysobiects 
    	where name = 'my_proc' and type = 'p'   
    )
    dropproc my_proc GO;
    # 创建
    create proc my_pro;
    @a int, @b char(8), @c char(50) as
    insert into author(author_id, author_name, address) values(@a,@b,@c) Go;
    ```

    解析：在数据库中判断是否存在名为 my_proc 存储过程，即从系统表中查询有没有和 my_proc 同名的过程，用 'select name from sysobjects' 表示。其中 sysobjects 为系统表，保存当前数据库的对象，如约束、默认值、日志，规则，存储过程等。

    常用的字段为：

    ```mysql
    sysobject(
        name sysnae, --object 名称
        id int, --object id
        xtype char(2), --object 类型
        type char(2), --object 类型
        uid smallint, --object 所有者的ID
        ... --其他的字段不常用到。
    )
    # 创建过程的命令格式为：
    create proc my_proc 
    @变量1, @变量2, as{<sql_statement>[;][...n]}[;]
    <sql_statement>::={[begin] statements [end]}
    ```

64. 事务是数据库执行的基本单元，如果一个事务执行成功，则全部更新提交；如果一个事务执行失败，则已做过的更新被恢复原状，好像整个事务从为执行，这就是保持数据库处于 `一致性` 状态。

65. 数据仓库是一个面向主题，集成的，时变的，非易失的数据集合，支持管理部门的决策过程，数据仓库通过数据转移从多个数据源提取数据，为了解决不同数据源格式上的不统一，需要进行的数据操作是 `转换`。

66. 设有关系模式 W(C,P,S,G,T,R),其中各属性的含义是：C为课程，P为老师，S为学生，G为成绩，R为教师，根据定义有如下的函数依赖及：

    F={C->G, (S,C)->G, (T,R)->C, (T,P)->R, (T,S)->R}

    W的规范程度可高达 `1NF`。

    若将关系模式W分解为3个关系模式：W1(C,P), W2(S,C,G), W3(S,T,R,C)

    则 W1 的规范化程度最高可达到 `4NF`，W2的规范化程度最高可达到 `1NF`，W3的规范化程度最高可达到 `3NF`。

    解析：第一范式，每个属性不可再分，是关系数据库的基础。第二范式，不允许存在部分函数依赖（主要是复合主键）。第三范式，是第二范式基础上，不允许存在传递函数依赖。

67. 如果数据库中的一个基本表的数据量很少，且插入，删除，更新等操作频繁，该基本表最佳采用的文件结构是 `堆文件`。

68. 在 UML 模型中，用于表达一系列的对象，对象之间的联系以及对象间发送和接收消息的图是 `通信图`。

69. SQL server中根据索引的实现方式，索引技术可以分成有序索引和 `散列索引` 两大类。

70. 在分布式数据库中，使用 `分配` 模式来描述各片段到物理存放地的映像。

71. SQL server中有五种约束类型，分别是 `主键约束、外键约束、唯一性约束、缺省约束和检查约束`。

72. 触发器有三种类型，即 `insert 类型， update类型 和 delete 类型`。

73. 在 SQL server 2008 中，设有顾客表（顾客号，顾客名，所在地区，年龄），应用系统需统计指定地区的顾客人数和平均年龄。

    ```mysql
    create proc p_count 
    @area varchar(20) 
    as
    select count(*) as 人数， avg(年龄) as 平均年龄 from 顾客表 where 所在地区 = @area;
    ```

74. 在 SQL server 2008 中，要授予某数据库中的某个用户具有该数据库中全部用户数据表的插入、删除和修改权限，比较合理的做法是将该用户添加到系统提供的 `db_datawriter` 数据库角色中。

75. 事务是一系列操作组成的，事务的执行表现为事务中各个操作的执行。每个事务应具有结束操作。当一个事务发生故障需要中止并取消所有已执行的数据修改时应执行 `UNDO` 操作。

76. 在 SQL server 2008 中，某数据库用户 user 在此数据库中具有对表数据的查询和更改权限。现要收回 user 对 T 表的数据更改权，下述是实现该功能的语句： `revoke update on T from user`。

    解析：对数据的访问是通过 SQL server 2008 的权限层次结构进行管理的。可以通过 `grant,deny 和 revoke` 语句来管理这个权限结构。三种语句的作用分别为：

    1. grant：允许一个数据库用户或角色执行所授权指定的操作；
    2. deny：拒绝一个数据库用户或角色的特定权限，并且阻止它们从其他角色中继承这个权限；
    3. revoke：收回已经授予的权限；

77. 设某数据库中作者表（作者号，城市）和出版商表（出版商号，城市）。

    ```mysql
    select 城市 from 作者表
    where 作者表.城市 not in
    (select 城市 from 出版商表)
    ```

78. 某事务从账户A转出资金并向账户B站如资金，此操作要么全做，要么全不做。为了保证操作的完整，需要利用到事务性质中的 `原子` 性。

79. 在动态转储中，利用转储文件只能将数据库恢复到转储过程的某个状态，且转储文件中的数据可能不一致，只有和 `日志` 文件综合起来使用，才能使数据恢复到一致状态。

80. 在数据仓库设计和建设过程中，设计者需要调查用户的决策或数据处理需求，并将功能相近且需要相关联数据支持的需求进行归类，得到不同的需求集合，并在企业数据模型中寻找能够满足各个需求集合的数据集合，然后针对各个数据集合开展数据仓库数据模型的设计。这种设计方法称为 `面向主题` 的设计方法。

81. OLAP 主要用于支持复杂的分析操作，侧重对决策人员和高层管理人员的数据支持。OLAP 的实现方式主要有三种：`MOLAP,ROLAP,HOLAP`。

    OLAP 的实现技术主要分为以下三类:

    1. 基于关系型数据库的 OLAP(ROLAP,Relational OLAP);
    2. 基于多维数据库的 OLAP(MOLAP,MultiDimensional OLAP);
    3. 混合型： OLAP(HOLAP, Hybrid OLAP);

82. ==差异备份== 只记录上次完整数据库备份发生更改的数据。

83. `union` 可以把两个或多个 select 语句的查询结果组合成一个结果集，使用时要求所有 select 语句的列数应相同，对应列的数据烈性相容。

    解析：union 操作符用于合并两个或多个 select 语句的结果集。注意：union 内部的 select 语句必须拥有相同的数量的列，而且对应列的语义应该相同。列也必须拥有兼容的数据类型。同时，每条 select 语句中的列的顺序必须相同。

84. 具体来说，UML 的语义是定义在一个四层建模概念框架中的，这四层分别是`元元模型层，元模型层，模型层，用户模型层`。

85. 在 UML 中，`聚集` 是一种特殊形式的关联，它表示类之间的关系是整体与部分的关系。

86. 在衡量数据库应用系统的性能指标中 `系统吞吐量` 指的是系统在单位时间内可以完成的数据库事务数量。

87. 为了保证正确调度事务的并发操作，事务对数据库对象加锁、解锁需遵守加锁的协议。加锁协议中两阶段加锁协议可以保证事务调度 `可串行` 性。

88. 在并行数据库中，最适合整表扫描操作的数据划分方法是 `轮转法` 。

    轮转法：最适合于扫描整个关系。

    散列划分法：比轮转法更适合点查询，也适合顺序扫描关系。

    范围划分法：明显利于范围查询和点查询。

89. 在 SQL server 2008 中，对于更新的触发器，系统将产生2张逻辑工作表，其中存放前数据的逻辑工作表是 `deleted表`。扩展：`inserted 用于更新后的数据。`

90. Google 的云数据库是一个分布式的结构化数据存储系统，称作 `Big table`。

91. 设某数据库服务器有3块146GB的sas硬盘，为了保证数据的安全性，数据管理员利用硬件 raid卡 将三块硬盘做成 raid5 ，则服务器可使用磁盘空间为 `292`。 解析：raids 的磁盘容量为硬盘总数 -1。

92. 知识发现主要由三个步骤组成，它们是 `数据准备，数据挖掘，结果的解释评估`。

93. 在 SQL server 2008中，主要数据文件必须建立在 `主文件组中`。

94. 在分布式数据库中，如果用户编写程序时不必了解数据分片在各个场地的分配情况，则称该分片式数据库系统具有 `位置` 透明性。

95. 不同的数据库管理系统采用的日志文件格式不完全一样，概括起来主要有以记录为单位的日志文件和以 `数据块`为单位的日志文件两种。

96. 设某数据库中有旅客表 A（旅客编号，城市）和旅客表 B （旅客编号，城市），现将所以旅客的数据存储这两张表中。语句：

    ```mysql
    select 城市 from 旅客表A
    union 
    select 城市 from 旅客表B
    ```

    解析：SQL中的集合操作符 in,except,intersect 和 union 的用法别为：

    - in， 确定给定的值是否与查询子查询或列表中的值相匹配，使其得以选择与列表中的任意一个值匹配的行。
    - except，指在一个集合中存在，但是不存在与第二个集合中的数据；
    - intersect，是指在两个集合中都存在的数据；
    - union，操作符用于合并两个或多个 select 语句的结果集，对于 union 操作符，请注意，union 内部的 select 语句必须拥有相同数量的列，列也必须拥有相似的数据类型。SQL 的 union 子句语法是合并两个或多个子查询的结果集，并自动删除合并结果集中的重复记录。

97. 删除用户自定义的函数使用 `drop function` 语句来实现。

    语法：`drop funciotn {[schema_name] function_name}[...n]`。

98. DBAS 生命周期中，规划与分析的主要工作内容包括系统规划与定义，项目规划和 `可行性分析`。

99. DFD 方法的基本元素包括数据流，处理，数据存储和 `外部项`。

100. 在 UML 中，包图是用来表示包与包之间的关系的`类`图。

101. 设有关系表：商品（商品号，商品名，类别），现要统计商品的类别数量。

     ```mysql
     select count(distinct 类别) from 商品;
     ```

102. sql server 2008中，记录SQL server实例中所有系统级信息的系统数据库是 `master`

103. 每 TPS 代价值是用于衡量系统 `性价` 比的指标。

104. DFD 方法由四种基本元素构成，它们是 `数据流，处理，数据存储和外部项`。

105. UML 中的 `活动` 图的主要作用是陈述活动与活动之间流程控制的转移，其作用类似于流程图，然而与流程图不同的是支持并行行为。

106. 设有学生表（学号，姓名，所在系）和选课表（学号，课程好，成绩），现要利用开窗函数查询每个学生姓名，所在系及选课门数（不包括没选课的学生）语句

     ```mysql
     select distinct 姓名,所在系,count(*) 
     ```
     
107. 在事务概要设计中，用 `read` 原语来表示应用层的 select 操作。

108. 在 IDEF1X 建模方法中，用圆角矩形框表示 `从属` 实体集。

109. UML中的通信图显示的是系统内对象之间的 `关系` ，并强调交互的顺序。

110. 在 sql server 中设有商品表（商品号，商品名，类别，价格），现要查询平均价格超过 1000 的商品类别。

     ```mysql
     select 类别 from 商品表 group by 类别 having avg(价格) > 100;
     ```

111. 在 sql server 中设有商品表（商品号，商品名，类别，价格），现要查询每类商品中价格最高的前3个商品的商品名、类别和价格。

     ```mysql
     select 商品名，类别，价格 from 商品表 a
     where 价格 in (select top3 价格 from 商品表 b 
                  where a.类别 = b.类别 
                  order by 价格 desc);
     ```

     

112. 在 sql  server 2008中，用户定义的角色属于 `数据库` 级别的角色。

113. 在数据库系统运行维护过程中，`数据库管理员或DBA` 岗位承担了数据库的备份与恢复、数据库的安全和完整性控制、数据库性能的监控分析和改进等工作。

114. 在数据库调试过程中，增加 `冗余` 列方法是指在一个表中增加来自其他表的列，它常用来在查询时避免连接操作。

115. sql server 2008支持的备份类型包括数据库备份，`文件备份` 以及事务日志备份几种方式。

116. 分片透明性时最高级别的透明性，位于全局概念模式与 `分片` 模式之间。

117. 在数据集成中，ETL 中的 T 的中文意思时 `转换`。

     解析：ETL 的过程为 -提取（Extract）-转换（Transform） -加载（Load）。

118. 混合型 OLAP 是指将基于多维数据库的 OLAP 和基于 `关系` 数据库的 OLAP 结合起来。

119. 在进行数据库应用系统需求分析时，需要预估系统的吞吐量，这属于数据应用系统的 `性能` 需求分析 。

120. DFD 建模方法由四种基本元素构成，其中数据源或数据终点被成为 `外部` 项。

121. 类图主要用于表达问题领域和概念模型，类图中除了表达抽象概念的名称外，还需要表达抽象概念的属性和 `行为`。

122. 在 select 语句中，用于进行右外连接的子句是 `right join`。

123. sql server 2008中有职工表（职工号，职工名，所在部门，基本工资，奖励工资），现要统计每个部门奖励工资最高的前3个职工的姓名和奖励工资。

     ```sql
     select 所在部门，职工名，奖励工资 from 职工表 a
     	where 奖励工资 in (
             select top 3 奖励工资 from 职工表 b where a.所在部门 =b.所在部门
             order by 奖励工资 desc
         )order by 所在部门，奖励工资 desc;
     ```

124. 设有表 student(sno,sname,sdept) 现要统计人数超过 1000 人的系。

     ```sql
     select sdept, conut(*) from student 
     group by sdept having count(*) > 1000;
     ```

125. 有以下利用游标查询计算机系学上姓名的程序段：

     ```mysql
     declare @sname varchar(20)
     declare test_cur cursor for
     	select sname from student where sdept = '计算机系'
     open test_cur
     	fetch next from test_cur into @same
     ......
     ```

126. 有如下创建分区的函数，该函数将数据划分4个愤分区，其中左右边分区的数据范围是 `大于200`：

     ```mysql
     create partition function pf1(int) 
     as range left for values(1,100,200);
     ```

127. 在 sql server 2008中，db_datareader 角色默认具有 ==select== 用户数据库中全部数据权限。

128. 某系统运行过程中异常，已提交事务所影响的数据未能正确写入磁盘且无法恢复，此故障破坏了事务的 `持久性`。

129. 如果数据文件中的数据记录排列顺序与索引文件中索引项的排列顺序一致，此种索引被称为 `聚集` 索引。

130. 在分布式数据库查询中，导致数据传输量大的主要原因是数据间的 `连接` 操作和并操作。

131. 如果数据文件中的每个查找码的值在索引文件中都对应一个索引记录，则该类索引称为 `稠密` 索引。

132. 从功能角度来看 DBAS 可以分为四个层次来实现，其中负责与用户交互的是 ==表示== 层的功能。

133. 在 UML 中，用于描述系统内对象之间的消息发送和接收序列的称为 ==顺序== 图。

134. 设有如下通过游标查询计算机系学生的代码片段：

     ```mysql
     declare @sname varchar(20)
     declare test_cur cursor for
     	select sname from student where sdept = '计算机系'
     open test_cur
     	fetch next from test_cur into @sname
     where @@FETCH_STATUS = 0
     GEGIN
     PRINT @sname
     ...
     end close test_cur
     ```

     解析：在对游标数据进行提取的过程中，可以使用 @@FETCH_STATUS 全局变量判断数据提取的状态。@@FETCH_STATUS 返回的数据类型是 int。0 表示 FETCH_STATUS 语句成功，-1 表示 FETCH 语句失败或此行不在结果中，-2 表示提取的行不存在。

135. 在 sql server 2008 中，身份验证模式有两种： Windows 身份验证模式和 ==混合== 身份验证模式。

136. 当数据库系统中存在死锁时，通常的解决方案是选择一个或几个死锁事务，==回滚或rollback==这些事务。

137. 在数据库调优过程中，需要对数据库锁粒度进行控制。锁的粒度越大，事务并发执行程度越低，数据库系统开销越 ==小==。

138. 在 sql server 2008中，数据库镜像分为高可以用操作模式，==高保护操作模式==和高性能操作模式。

139. 分布式数据库是物理上分散，逻辑上 ==集中== 的数据库系统。

140. 在企业数据仓库中，操作数据存储层 （ODS），一般用以支撑即时 OLAP 和 ==全局== 型 OLAP 应用。

141. 根据事务发展的延续性和规律性，基于变量历史时间点上的顺序数据，推测变量未来后续时间点的发展趋势的任务称为 ==时间序列== 分析。

142. 在进行数据库应用系统需求分析时，需要预估系统的吞吐量，这属于数据应用系统的 ==性能== 需求分析。

143. DFD 建模方法由4种基本元素构成，其中数据源或数据终点被称为 ==外部== 项。

144. 通信图时交互图的一种，也被称为 ==协作图==。

145. 现要查询 T1 表种 C1 列值最小的 2 行数据。

     ```mysql
     select top 2 * from T1 order by C1;
     ```

146. 设在 sql server 某数据库种有表 选课（学号，课程号，成绩），现要查询考试平均成绩最高的课程的课程号：

     ```mysql
     select top 1 with ties 课程号 from 选课
     group by 课程号
     order by avg(成绩) desc;
     ```

147. 设在 sql server 某数据库中有表 选课（学号，课程号，成绩），现要定义不能删除成绩不及格学生的选课记录的触发器：

     ```mysql
     create trigger tri_del on 选课 after delete as
     if exists (select * from deleted where 成绩 < 60)
     rollback;
     ```

148. 设在 sql server 中，要为 U1 定义一个名为 Sales 的架构：

     ```mysql
     create schema Sales AUTHORIATION U1;
     ```

149. 设在 sql server 中，要启用被禁用的 user1 登录账户：

     ```mysql
     alter login user1 enable; 
     ```

150. 在动态转储中，需要将转储文件和 ==日志==  文件综合起来使用，才能将数据库恢复到一致状态。

151.  分布式数据库系统的恢复采用的最典型策略时基于 ==两阶段== 的提交协议。

152. 在多维数据分析中，从高粒度数据视图切换到低粒度数据视图的分析操作为 ==钻取== 操作。

153. 在关联规则挖掘中，为了发现有意义的关联规则，需要给定最小 ==支持度== 和最小可信度两个阀值。

